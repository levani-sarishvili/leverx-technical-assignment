<mvc:View
  controllerName="levani.sarishvili.controller.ProductList"
  displayBlock="true"
  xmlns="sap.m"
  xmlns:mvc="sap.ui.core.mvc"
  xmlns:f="sap.f"
  xmlns:core="sap.ui.core"
  xmlns:layout="sap.ui.layout">

  <f:DynamicPage
    id="productListPage"
    showFooter="true"
    headerExpanded="true"
    toggleHeaderOnTitleClick="true"
    preserveHeaderStateOnScroll="false"
    class="sapUiNoContentPadding">

    <!-- Title -->
    <f:title>
      <f:DynamicPageTitle>
        <f:snappedContent>
          <Breadcrumbs separatorStyle="{/selected}">
            <Link text="ProductList" />
          </Breadcrumbs>
        </f:snappedContent>
        <f:heading>
          <Title text="ProductList" level="H1" />
        </f:heading>
        <f:expandedContent>
          <Breadcrumbs separatorStyle="{/selected}">
            <Link text="ProductList" />
          </Breadcrumbs>
        </f:expandedContent>
      </f:DynamicPageTitle>
    </f:title>

    <!-- DynamicPage Header -->
    <f:header>
      <f:DynamicPageHeader pinnable="true">
        <FlexBox wrap="Wrap" alignItems="End" justifyContent="SpaceBetween"
          width="100%">
          <!-- Search field -->
          <VBox class="sapUiSmallMarginEnd sapUiTinyMarginBottom">
            <SearchField
              id="productSearchField"
              placeholder="Search product"
              search="onProductSearchPress"
            />
          </VBox>

          <!-- Combobox -->
          <VBox class="sapUiSmallMarginEnd sapUiTinyMarginBottom">
            <Label text="Category" showColon="true" />
            <ComboBox
              items="{
              path: '/Products',
              sorter: { path: 'text' }
              }">
              <core:Item key="{key}" text="{text}" />
            </ComboBox>
          </VBox>

          <!-- Multi combobox -->
          <VBox class="sapUiSmallMarginEnd sapUiTinyMarginBottom">
            <Label text="Brand" showColon="true" />
            <MultiComboBox
              selectionChange="handleSelectionChange"
              selectionFinish="handleSelectionFinish"
              width="350px"
              items="{
              path: '/Products',
              sorter: { path: 'Name' }
              }">
              <core:Item key="{ProductId}" text="{Name}" />
            </MultiComboBox>
          </VBox>

          <!-- Date picker -->
          <VBox class="sapUiSmallMarginEnd sapUiTinyMarginBottom">
            <Label text="Release date" showColon="true" />
            <DatePicker
              id="DP1"
              change="handleChange"
            />
          </VBox>
        </FlexBox>
      </f:DynamicPageHeader>
    </f:header>


    <!-- Content wrapped in a VBox -->
    <f:content>
      <VBox width="100%">
        <!-- Products Table -->
        <Table
          id="productsTable"
          items="{/Products}"
          sticky="ColumnHeaders"
          backgroundDesign="Solid"
          width="100%"
          noDataText="No products found"
        >
          <headerToolbar>
            <OverflowToolbar>
              <content>
                <Title text="Products" level="H2" />
                <ToolbarSpacer />
              </content>
            </OverflowToolbar>
          </headerToolbar>

          <columns>
            <Column width="12em" hAlign="Begin">
              <header>
                <HBox alignItems="Center">
                  <Button
                    type="Transparent"
                    icon="sap-icon://sort"
                    press="onSortPress"
                    class="sapUiTinyMarginEnd">
                    <customData>
                      <core:CustomData key="sortField" value="Name" />
                    </customData>
                  </Button>
                  <Text text="Name" />
                </HBox>
              </header>
            </Column>

            <Column minScreenWidth="1360px" demandPopin="true" hAlign="Begin">
              <header>
                <HBox alignItems="Center">
                  <Button
                    type="Transparent"
                    icon="sap-icon://sort"
                    press="onSortPress"
                    class="sapUiTinyMarginEnd">
                    <customData>
                      <core:CustomData key="sortField" value="Price" />
                    </customData>
                  </Button>
                  <Text text="Price" />
                </HBox>
              </header>
            </Column>

            <Column minScreenWidth="Desktop" demandPopin="true" hAlign="Begin">
              <header>
                <HBox alignItems="Center">
                  <Button
                    type="Transparent"
                    icon="sap-icon://sort"
                    press="onSortPress"
                    class="sapUiTinyMarginEnd">
                    <customData>
                      <core:CustomData key="sortField" value="Category" />
                    </customData>
                  </Button>
                  <Text text="Category" />
                </HBox>
              </header>
            </Column>

            <Column minScreenWidth="Desktop" demandPopin="true" hAlign="Begin">
              <header>
                <HBox alignItems="Center">
                  <Button
                    type="Transparent"
                    icon="sap-icon://sort"
                    press="onSortPress"
                    class="sapUiTinyMarginEnd">
                    <customData>
                      <core:CustomData key="sortField" value="ReleaseDate" />
                    </customData>
                  </Button>
                  <Text text="ReleaseDate" />
                </HBox>
              </header>
            </Column>

            <Column minScreenWidth="Desktop" demandPopin="true" hAlign="Begin">
              <header>
                <HBox alignItems="Center">
                  <Button
                    type="Transparent"
                    icon="sap-icon://sort"
                    press="onSortPress"
                    class="sapUiTinyMarginEnd">
                    <customData>
                      <core:CustomData key="sortField" value="Brand" />
                    </customData>
                  </Button>
                  <Text text="Brand" />
                </HBox>
              </header>
            </Column>

            <Column minScreenWidth="Desktop" demandPopin="true" hAlign="Begin">
              <header>
                <HBox alignItems="Center">
                  <Button
                    type="Transparent"
                    icon="sap-icon://sort"
                    press="onSortPress"
                    class="sapUiTinyMarginEnd">
                    <customData>
                      <core:CustomData key="sortField" value="SupplierName" />
                    </customData>
                  </Button>
                  <Text text="SupplierName" />
                </HBox>
              </header>
            </Column>

            <Column minScreenWidth="Desktop" demandPopin="true" hAlign="Begin">
              <header>
                <HBox alignItems="Center">
                  <Button
                    type="Transparent"
                    icon="sap-icon://sort"
                    press="onSortPress"
                    class="sapUiTinyMarginEnd">
                    <customData>
                      <core:CustomData key="sortField" value="Rating" />
                    </customData>
                  </Button>
                  <Text text="Rating" />
                </HBox>
              </header>
            </Column>

            <!-- Empty column for table actions -->
            <Column minScreenWidth="360px" demandPopin="true" hAlign="Begin">
            </Column>
          </columns>
          <items>
            <ColumnListItem type="Navigation" press="onProductPress">
              <Text text="{Name}" />
              <Text text="{= ${Price} + ' ' + 'USD'}" />
              <Text text="{Category}" />
              <Text text="{ReleaseDate}" />
              <Text text="{Brand}" />
              <Text text="{SupplierName}" />
              <RatingIndicator
                id="RI_display_only"
                iconSize="1rem"
                maxValue="5"
                class="sapUiSmallMarginBottom"
                value="{Rating}"
                displayOnly="true" />

            </ColumnListItem>
          </items>
        </Table>
      </VBox>
    </f:content>

    <!-- Footer -->
    <f:footer>
      <OverflowToolbar>
        <ToolbarSpacer />
        <Button press="onProductCreatePress" icon="sap-icon://add" type="Ghost"
          text="Create" />
      </OverflowToolbar>
    </f:footer>
  </f:DynamicPage>
</mvc:View>