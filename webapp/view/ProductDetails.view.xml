<mvc:View
  controllerName="levani.sarishvili.controller.ProductDetails"
  xmlns:m="sap.m"
  xmlns="sap.uxap"
  xmlns:mvc="sap.ui.core.mvc"
  xmlns:t="sap.ui.table"
  xmlns:rowmode="sap.ui.table.rowmodes">

  <ObjectPageLayout upperCaseAnchorBar="false">
    <headerTitle>
      <ObjectPageDynamicHeaderTitle>
        <breadcrumbs>
          <m:Breadcrumbs separatorStyle="{/selected}"
            currentLocationText="{i18n>breadcrumbProductDetails}">
            <m:Link text="{i18n>breadcrumbHome}" press=".onNavToHome" />
          </m:Breadcrumbs>
        </breadcrumbs>

        <expandedHeading>
          <m:Title text="{Name}" level="H1" />
        </expandedHeading>

        <snappedHeading>
          <m:HBox>
            <m:VBox>
              <m:Title text="{Name}" level="H1" />
              <m:Label text="{Id}" />
            </m:VBox>
          </m:HBox>
        </snappedHeading>

        <expandedContent>
          <m:Label text="{Id}" />
        </expandedContent>

        <snappedTitleOnMobile>
          <m:Title text="{Name}" />
        </snappedTitleOnMobile>

        <actions>
          <m:Button
            id="productEditButton"
            text="{i18n>editButtonText}"
            press=".onEditProductPress"
            type="Emphasized"
            class="sapUiSmallMarginEnd" />
          <m:Button
            id="productDeleteButton"
            text="{i18n>deleteButtonText}"
            type="Default"
            press=".onDeleteProductPress" />

          <m:Button
            id="productSaveButton"
            text="{i18n>saveButtonText}"
            press=".onSaveChangesPress"
            type="Emphasized"
            visible="false"
            class="sapUiSmallMarginEnd" />
          <m:Button
            id="productCancelButton"
            text="{i18n>cancelButtonText}"
            type="Default"
            visible="false"
            press=".onCancelChangesPress" />
        </actions>
      </ObjectPageDynamicHeaderTitle>
    </headerTitle>

    <headerContent>
      <m:FlexBox wrap="Wrap" fitContainer="true">
        <m:VBox class="sapUiLargeMarginEnd sapUiSmallMarginBottom">
          <m:HBox>
            <m:Label text="{i18n>productCategoryLabel}" showColon="true"
              class="sapUiTinyMarginEnd" />
            <m:Text text="{Category}" />
          </m:HBox>

          <m:HBox>
            <m:Label text="{i18n>productBrandLabel}" showColon="true"
              class="sapUiTinyMarginEnd" />
            <m:Text text="{Brand}" />
          </m:HBox>

          <m:HBox>
            <m:Label text="{i18n>productSupplierLabel}" showColon="true"
              class="sapUiTinyMarginEnd" />
            <m:Text text="{SupplierName}" />
          </m:HBox>
        </m:VBox>

        <m:VBox class="sapUiLargeMarginEnd sapUiSmallMarginBottom">
          <m:Title text="{i18n>productStockStatusLabel}" class="sapUiTinyMarginBottom" />
          <m:ObjectStatus text="{StockStatus}"
            state="{path: 'StockStatus', formatter: '.formatter.formatStockStatus'}"
            class="sapMObjectStatusLarge"
          />
        </m:VBox>

        <m:VBox class="sapUiLargeMarginEnd">
          <m:Title text="{i18n>productPriceLabel}" class="sapUiTinyMarginBottom" />
          <m:ObjectNumber number="{Price}"
            unit="USD"
            emphasized="false"
            class="sapMObjectNumberLarge" />
        </m:VBox>
      </m:FlexBox>
    </headerContent>

    <sections>
      <ObjectPageSection titleUppercase="false" title="{i18n>productInfoSectionTitle}">
        <subSections>
          <ObjectPageSubSection title="{i18n>productInfoSectionTitle}" showTitle="false">
            <blocks>
              <m:VBox id="productDetailsContainer">
              </m:VBox>
            </blocks>
          </ObjectPageSubSection>
        </subSections>
      </ObjectPageSection>

      <ObjectPageSection titleUppercase="false" title="{i18n>salesOrdersSectionTitle}">
        <subSections>
          <ObjectPageSubSection title="{i18n>salesOrdersSectionTitle}" showTitle="false">
            <blocks>
              <!-- Order Table -->
              <t:Table
                rows="{/SalesOrders}"
                rowSelectionChange="onRowSelectionChange"
                ariaLabelledBy="title"
                id="productDetailsTable"
                selectionMode="MultiToggle"
                rowActionCount="1"
                selectionBehavior="Row"
                alternateRowColors="true"
              >

                <t:rowMode>
                  <rowmode:Auto
                    minRowCount="20" />
                </t:rowMode>

                <t:noData>
                  <m:IllustratedMessage enableVerticalResponsiveness="true"
                    illustrationType="sapIllus-NoData">
                  </m:IllustratedMessage>
                </t:noData>

                <t:extension>
                  <m:OverflowToolbar style="Standard">
                    <m:Title
                      text="Orders" />
                    <m:ToolbarSpacer />

                    <m:SearchField width="17.5rem" placeholder="Search order"></m:SearchField>
                  </m:OverflowToolbar>
                </t:extension>

                <t:columns>
                  <!-- OrderId -->
                  <t:Column
                    hAlign="Begin"
                    sortProperty="OrderId"
                    width="10%"
                  >
                    <m:Label text="{i18n>orderTableIdColumn}" />
                    <t:template>
                      <m:Text text="{OrderId}" />
                    </t:template>
                  </t:Column>

                  <!-- Customer -->
                  <t:Column
                    hAlign="Begin"
                    sortProperty="Customer"
                    width="20%"
                  >
                    <m:Label text="{i18n>orderTableCustomerColumn}" />
                    <t:template>
                      <m:Text text="{Customer}" />
                    </t:template>
                  </t:Column>

                  <!-- Quantity -->
                  <t:Column
                    hAlign="End"
                    sortProperty="Quantity"
                    width="10%"
                  >
                    <m:Label text="{i18n>orderTableQuantityColumn}" />
                    <t:template>
                      <m:Text text="{Quantity}" />
                    </t:template>
                  </t:Column>

                  <!-- OrderDate -->
                  <t:Column
                    hAlign="End"
                    sortProperty="OrderDate"
                    width="15%"
                  >
                    <m:Label text="{i18n>orderTableOrderDateColumn}" />
                    <t:template>
                      <m:Text text="{OrderDate}" />
                    </t:template>
                  </t:Column>

                  <!-- Status -->
                  <t:Column
                    hAlign="Begin"
                    sortProperty="Status"
                    width="15%"
                  >
                    <m:Label text="{i18n>orderTableStatusColumn}" />
                    <t:template>
                      <m:ObjectStatus
                        text="{Status}"
                        state="{
                    path: 'Status',
                    formatter: '.formatter.formatOrderStatus'
                }" />
                    </t:template>
                  </t:Column>

                  <!-- ShippingCost -->
                  <t:Column
                    hAlign="End"
                    sortProperty="ShippingCost"
                    width="15%"
                  >
                    <m:Label text="{i18n>orderTableShippingCostColumn}" />
                    <t:template>
                      <m:ObjectNumber
                        number="{path: 'ShippingCost'}"
                        unit="USD"
                        emphasized="false"
                        textAlign="End"
                      />
                    </t:template>
                  </t:Column>
                </t:columns>

                <!-- TotalPrice -->
                <t:Column
                  hAlign="End"
                  sortProperty="TotalPrice"
                  width="15%"
                >
                  <m:Label text="{i18n>orderTableTotalPriceColumn}" />
                  <t:template>
                    <m:ObjectNumber
                      number="{path: 'TotalPrice'}"
                      unit="USD"
                      emphasized="false"
                      textAlign="End"
                    />
                  </t:template>
                </t:Column>

                <!-- Row Actions -->
                <t:rowActionTemplate>
                  <t:RowAction>
                    <t:RowActionItem
                      icon="sap-icon://feeder-arrow"
                      type="Custom"
                      press=".onEditRowPress" />
                  </t:RowAction>
                </t:rowActionTemplate>
              </t:Table>
            </blocks>
          </ObjectPageSubSection>
        </subSections>
      </ObjectPageSection>
    </sections>
  </ObjectPageLayout>
</mvc:View>